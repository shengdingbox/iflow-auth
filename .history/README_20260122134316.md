# iFlow Auth 示例程序

这是一个 iFlow OAuth 认证库的示例程序，演示如何使用该库进行 OAuth 认证。

## 功能特性

- OAuth 2.0 授权码流程
- Token 刷新机制
- Cookie 认证支持
- Token 持久化存储

## 运行方式

### 1. OAuth 认证流程

```bash
go run main.go
```

程序会：
1. 启动本地 OAuth 回调服务器（端口 11451）
2. 生成授权 URL
3. 等待用户在浏览器中完成认证
4. 交换授权码获取 access token
5. 保存 token 到本地文件

### 2. Cookie 认证流程

设置环境变量后运行：

```powershell
$env:IFLOW_COOKIE="your_cookie_here"
go run main.go
```

## 输出文件

- `iflow-token.json` - OAuth 认证获取的 token
- `iflow-cookie-token.json` - Cookie 认证获取的 token

## 配置代理

如需使用代理，可以在代码中配置：

```go
cfg := &Config{}
cfg.SDKConfig.HTTPProxy = "http://proxy.example.com:8080"
cfg.SDKConfig.HTTPSProxy = "http://proxy.example.com:8080"
```

## 注意事项

- 确保端口 11451 未被占用
- Cookie 认证需要从浏览器中获取有效的 iFlow cookie
- Token 文件包含敏感信息，请妥善保管